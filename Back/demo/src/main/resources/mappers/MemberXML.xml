<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.example.demo.dao.MemberDAO">
	<select id="getMemberList" resultType="MemberVO">
		
		SELECT MNUM, MEMBERID, NICKNAME, PHONENUMBER, DATE, LASTACCESSDATE, ROLE FROM MEMBER
   		  
		<where>
			<if test= 'type == "i"'>
				MEMBERID like CONCAT('%',#{searchThings},'%')
			</if>
			<if test='type == "n"'>
				NICKNAME like CONCAT('%',#{searchThings},'%')
			</if>
			<if test='type == "in"'>
				MEMBERID like CONCAT('%',#{searchThings},'%') 
				OR NICKNAME like CONCAT('%',#{searchThings},'%')
			</if>
			
		</where>
		
		ORDER BY ${basis} ${alignByString} LIMIT #{startRow},#{size}
		
	</select>

	<select id="countMemberAllList" resultType="int">
		
		SELECT COUNT(*) FROM MEMBER
		
		<where>
		<choose>
			<when test='type == "i"'>
				MEMBERID like CONCAT('%',#{searchThings},'%')
			</when>
			<when test='type == "n"'>
				NICKNAME like CONCAT('%',#{searchThings},'%')
			</when>
			<when test='type == "in"'>
				MEMBERID like CONCAT('%',#{searchThings},'%') 
				OR NICKNAME like CONCAT('%',#{searchThings},'%')
			</when>
		</choose>
		</where>

	</select>
</mapper>